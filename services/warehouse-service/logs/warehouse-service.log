{"level":"error","timestamp":"2024-11-25T17:25:28.701+0700","caller":"discovery/consul.go:41","msg":"Failed to register service: Put \"http://localhost:8500/v1/agent/service/register\": dial tcp 127.0.0.1:8500: connect: connection refused","stacktrace":"ecommerce/warehouse-service/discovery.(*ServiceDiscovery).Register\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/discovery/consul.go:41\nmain.main\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/main.go:110\nruntime.main\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/runtime/proc.go:271"}
{"level":"fatal","timestamp":"2024-11-25T17:25:28.701+0700","caller":"warehouse-service/main.go:112","msg":"Failed to register service: Put \"http://localhost:8500/v1/agent/service/register\": dial tcp 127.0.0.1:8500: connect: connection refused","stacktrace":"main.main\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/main.go:112\nruntime.main\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/runtime/proc.go:271"}
{"level":"error","timestamp":"2024-11-25T17:26:19.843+0700","caller":"discovery/consul.go:41","msg":"Failed to register service: Put \"http://localhost:8500/v1/agent/service/register\": dial tcp 127.0.0.1:8500: connect: connection refused","stacktrace":"ecommerce/warehouse-service/discovery.(*ServiceDiscovery).Register\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/discovery/consul.go:41\nmain.main\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/main.go:110\nruntime.main\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/runtime/proc.go:271"}
{"level":"fatal","timestamp":"2024-11-25T17:26:19.844+0700","caller":"warehouse-service/main.go:112","msg":"Failed to register service: Put \"http://localhost:8500/v1/agent/service/register\": dial tcp 127.0.0.1:8500: connect: connection refused","stacktrace":"main.main\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/main.go:112\nruntime.main\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/runtime/proc.go:271"}
{"level":"info","timestamp":"2024-11-25T17:34:18.945+0700","caller":"warehouse-service/main.go:124","msg":"Starting server on port 8084"}
{"level":"info","timestamp":"2024-11-25T17:35:01.230+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |     678.584µs |             GET | /swagger/index.html |"}
{"level":"info","timestamp":"2024-11-25T17:35:01.283+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |         963µs |             GET | /swagger/swagger-ui.css |"}
{"level":"info","timestamp":"2024-11-25T17:35:01.284+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |    1.872833ms |             GET | /swagger/swagger-ui-standalone-preset.js |"}
{"level":"info","timestamp":"2024-11-25T17:35:01.289+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |     6.77475ms |             GET | /swagger/swagger-ui-bundle.js |"}
{"level":"info","timestamp":"2024-11-25T17:35:06.730+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |     586.416µs |             GET | /swagger/index.html |"}
{"level":"info","timestamp":"2024-11-25T17:35:06.746+0700","caller":"middleware/logging_middleware.go:22","msg":"| 304 |      48.292µs |             GET | /swagger/swagger-ui.css |"}
{"level":"info","timestamp":"2024-11-25T17:35:06.746+0700","caller":"middleware/logging_middleware.go:22","msg":"| 304 |      49.625µs |             GET | /swagger/swagger-ui-bundle.js |"}
{"level":"info","timestamp":"2024-11-25T17:35:06.746+0700","caller":"middleware/logging_middleware.go:22","msg":"| 304 |      33.667µs |             GET | /swagger/swagger-ui-standalone-preset.js |"}
{"level":"info","timestamp":"2024-11-25T17:35:06.793+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |         104µs |             GET | /swagger/favicon-32x32.png |"}
{"level":"info","timestamp":"2024-11-25T17:35:29.622+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |     189.792µs |             GET | /health |"}
{"level":"info","timestamp":"2024-11-25T17:35:29.669+0700","caller":"middleware/logging_middleware.go:22","msg":"| 404 |      17.167µs |             GET | /favicon.ico |"}
{"level":"info","timestamp":"2024-11-25T17:36:33.908+0700","caller":"middleware/logging_middleware.go:22","msg":"| 403 |    4.210584ms |            POST | /api/v1/warehouses/ |"}
{"level":"info","timestamp":"2024-11-25T17:37:30.606+0700","caller":"middleware/logging_middleware.go:22","msg":"| 403 |     275.958µs |            POST | /api/v1/warehouses/ |"}
{"level":"info","timestamp":"2024-11-25T17:39:18.948+0700","caller":"jobs/stock_release.go:39","msg":"Running stock release job for transfers before 2024-11-25 17:24:18.947696 +0700 WIB m=-599.978966458"}
{"level":"info","timestamp":"2024-11-25T17:39:19.181+0700","caller":"middleware/logging_middleware.go:22","msg":"| 404 |    1.574917ms |            POST | /api/v1/auth/token |"}
{"level":"info","timestamp":"2024-11-25T17:39:24.171+0700","caller":"middleware/logging_middleware.go:22","msg":"| 404 |      13.542µs |            POST | /api/v1/auth/token |"}
{"level":"info","timestamp":"2024-11-25T17:39:35.457+0700","caller":"warehouse-service/main.go:132","msg":"Starting server on port 8084"}
{"level":"info","timestamp":"2024-11-25T17:39:37.882+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |     446.166µs |            POST | /api/v1/auth/token |"}
{"level":"info","timestamp":"2024-11-25T17:39:49.765+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |     218.542µs |            POST | /api/v1/auth/token |"}
{"level":"info","timestamp":"2024-11-25T17:40:05.928+0700","caller":"middleware/logging_middleware.go:22","msg":"| 201 |   59.051875ms |            POST | /api/v1/warehouses/ |"}
{"level":"info","timestamp":"2024-11-25T17:41:00.361+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |   11.962167ms |             GET | /api/v1/warehouses/ |"}
{"level":"info","timestamp":"2024-11-25T17:41:20.986+0700","caller":"middleware/logging_middleware.go:22","msg":"| 401 |     302.959µs |             GET | /api/v1/warehouses/6744540576726236c16b4dbb |"}
{"level":"info","timestamp":"2024-11-25T17:41:29.032+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |    3.059334ms |             GET | /api/v1/warehouses/6744540576726236c16b4dbb |"}
{"level":"error","timestamp":"2024-11-25T17:42:34.740+0700","caller":"handlers/warehouse_handler.go:102","msg":"Failed to update stock: the provided hex string is not a valid ObjectID","stacktrace":"ecommerce/warehouse-service/handlers.(*WarehouseHandler).UpdateStock\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/handlers/warehouse_handler.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RequireRoles.func10\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rbac_middleware.go:36\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.AuthMiddleware.func9\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/auth_middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.MetricsMiddleware.func4\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/metrics_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RateLimiterMiddleware.func3\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rate_limiter.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggingMiddleware.func2\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/logging_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.SecurityHeaders.func1\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/security_headers.go:13\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-11-25T17:42:34.744+0700","caller":"middleware/logging_middleware.go:22","msg":"| 500 |     4.65875ms |             PUT | /api/v1/warehouses/%7Bwarehouse_id%7D/stock |"}
{"level":"error","timestamp":"2024-11-25T17:42:38.172+0700","caller":"handlers/warehouse_handler.go:102","msg":"Failed to update stock: the provided hex string is not a valid ObjectID","stacktrace":"ecommerce/warehouse-service/handlers.(*WarehouseHandler).UpdateStock\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/handlers/warehouse_handler.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RequireRoles.func10\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rbac_middleware.go:36\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.AuthMiddleware.func9\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/auth_middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.MetricsMiddleware.func4\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/metrics_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RateLimiterMiddleware.func3\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rate_limiter.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggingMiddleware.func2\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/logging_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.SecurityHeaders.func1\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/security_headers.go:13\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-11-25T17:42:38.173+0700","caller":"middleware/logging_middleware.go:22","msg":"| 500 |       1.137ms |             PUT | /api/v1/warehouses/%7Bwarehouse_id%7D/stock |"}
{"level":"error","timestamp":"2024-11-25T17:42:43.470+0700","caller":"handlers/warehouse_handler.go:102","msg":"Failed to update stock: the provided hex string is not a valid ObjectID","stacktrace":"ecommerce/warehouse-service/handlers.(*WarehouseHandler).UpdateStock\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/handlers/warehouse_handler.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RequireRoles.func10\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rbac_middleware.go:36\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.AuthMiddleware.func9\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/auth_middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.MetricsMiddleware.func4\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/metrics_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RateLimiterMiddleware.func3\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rate_limiter.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggingMiddleware.func2\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/logging_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.SecurityHeaders.func1\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/security_headers.go:13\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-11-25T17:42:43.471+0700","caller":"middleware/logging_middleware.go:22","msg":"| 500 |     815.042µs |             PUT | /api/v1/warehouses/%7Bwarehouse_id%7D/stock |"}
{"level":"error","timestamp":"2024-11-25T17:42:51.778+0700","caller":"repository/mongodb_repository.go:97","msg":"Failed to update stock: write exception: write errors: [Cannot create field '674355f546d7014bcdd04795' in element {stock: null}]","stacktrace":"ecommerce/warehouse-service/repository.(*mongoWarehouseRepository).UpdateStock\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/repository/mongodb_repository.go:97\necommerce/warehouse-service/handlers.(*WarehouseHandler).UpdateStock\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/handlers/warehouse_handler.go:100\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RequireRoles.func10\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rbac_middleware.go:36\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.AuthMiddleware.func9\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/auth_middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.MetricsMiddleware.func4\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/metrics_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RateLimiterMiddleware.func3\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rate_limiter.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggingMiddleware.func2\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/logging_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.SecurityHeaders.func1\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/security_headers.go:13\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-11-25T17:42:51.779+0700","caller":"handlers/warehouse_handler.go:102","msg":"Failed to update stock: write exception: write errors: [Cannot create field '674355f546d7014bcdd04795' in element {stock: null}]","stacktrace":"ecommerce/warehouse-service/handlers.(*WarehouseHandler).UpdateStock\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/handlers/warehouse_handler.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RequireRoles.func10\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rbac_middleware.go:36\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.AuthMiddleware.func9\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/auth_middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.MetricsMiddleware.func4\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/metrics_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RateLimiterMiddleware.func3\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rate_limiter.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggingMiddleware.func2\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/logging_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.SecurityHeaders.func1\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/security_headers.go:13\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-11-25T17:42:51.780+0700","caller":"middleware/logging_middleware.go:22","msg":"| 500 |   11.228583ms |             PUT | /api/v1/warehouses/6744540576726236c16b4dbb/stock |"}
{"level":"error","timestamp":"2024-11-25T17:42:57.155+0700","caller":"repository/mongodb_repository.go:97","msg":"Failed to update stock: write exception: write errors: [Cannot create field 'product123' in element {stock: null}]","stacktrace":"ecommerce/warehouse-service/repository.(*mongoWarehouseRepository).UpdateStock\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/repository/mongodb_repository.go:97\necommerce/warehouse-service/handlers.(*WarehouseHandler).UpdateStock\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/handlers/warehouse_handler.go:100\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RequireRoles.func10\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rbac_middleware.go:36\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.AuthMiddleware.func9\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/auth_middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.MetricsMiddleware.func4\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/metrics_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RateLimiterMiddleware.func3\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rate_limiter.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggingMiddleware.func2\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/logging_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.SecurityHeaders.func1\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/security_headers.go:13\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-11-25T17:42:57.156+0700","caller":"handlers/warehouse_handler.go:102","msg":"Failed to update stock: write exception: write errors: [Cannot create field 'product123' in element {stock: null}]","stacktrace":"ecommerce/warehouse-service/handlers.(*WarehouseHandler).UpdateStock\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/handlers/warehouse_handler.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RequireRoles.func10\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rbac_middleware.go:36\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.AuthMiddleware.func9\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/auth_middleware.go:35\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.MetricsMiddleware.func4\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/metrics_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.RateLimiterMiddleware.func3\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/rate_limiter.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggingMiddleware.func2\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/logging_middleware.go:14\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.SecurityHeaders.func1\n\t/Users/ilhamabdullah/Documents/project/ecommerce/services/warehouse-service/middleware/security_headers.go:13\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/ilhamabdullah/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.6/libexec/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-11-25T17:42:57.156+0700","caller":"middleware/logging_middleware.go:22","msg":"| 500 |    2.823708ms |             PUT | /api/v1/warehouses/6744540576726236c16b4dbb/stock |"}
{"level":"info","timestamp":"2024-11-25T17:43:29.793+0700","caller":"warehouse-service/main.go:132","msg":"Starting server on port 8084"}
{"level":"info","timestamp":"2024-11-25T17:43:32.952+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |     841.333µs |             GET | /swagger/index.html |"}
{"level":"info","timestamp":"2024-11-25T17:43:32.986+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |     196.333µs |             GET | /swagger/swagger-ui.css |"}
{"level":"info","timestamp":"2024-11-25T17:43:32.988+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |    1.206625ms |             GET | /swagger/swagger-ui-bundle.js |"}
{"level":"info","timestamp":"2024-11-25T17:43:32.988+0700","caller":"middleware/logging_middleware.go:22","msg":"| 200 |     379.917µs |             GET | /swagger/swagger-ui-standalone-preset.js |"}
